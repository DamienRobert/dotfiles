# Fichier .fvwm2rc, version 3.0
# Ne pas effacer la ligne précédente !
#
# Ce fichier configure le window-manager, qui est responsable de la
# décoration des fenêtres, du bureau virtuel, et du comportement de la
# souris.
# 
# Les lignes commençant par un dièse sont des commentaires. La syntaxe de
# ce fichier est décrite dans le manuel de fvwm2 (commande: man
# fvwm-2.4.0).

# On a rassemblé toutes les images utilisées par la configuration dans un
# endroit unique
ImagePath $HOME/pixmaps/ens:$HOME/pixmaps/games:\
/usr/include/X11/pixmaps

# Écrans virtuels (largeur x hauteur)
DeskTopSize 8x3

# Ne pas changer d'écran quand la souris est au bord de l'écran.
EdgeResistance 10000 16
EdgeScroll 100 100
EdgeThickness 0

# Je n'aime pas attendre (et je clique vite).
ClickTime 100

# En déplaçant une grande fenêtre (plus de 5% de la taille de l'écran),
# n'aficher qu'un squelette.
OpaqueMoveSize 5

# Coller les fenêtres quand elles sont séparées par moins de 10 pixels.
SnapAttraction 10

# Déplacer de façon souple
# SnapGrid [taille de la grille, en pixels]

# Apparence
# ---------
# Quand on déplace ou qu'on change la taille d' une fenêtre, on veut que
# la nouvelle position apparaisse au milieu de l'écran (et pas dans le
# coin en haut à gauche)
Emulate mwm

# Polices.
DefaultFont -adobe-helvetica-medium-r-normal-*-12-*-*-*-*-*-iso8859-1
Style * Font -adobe-helvetica-bold-r-normal-*-14-*-*-*-*-iso8859-1
Style FvwmButtons Font -adobe-helvetica-bold-r-normal-*-10-*-*-*-*-iso8859-1

# Le look des menus. On choisit un look un peu 3d, style GTK.
MenuStyle * SeparatorsLong
MenuStyle * PopupOffset 0 100, PopupImmediately, PopdownImmediately
MenuStyle * TitleUnderlines1
MenuStyle * VerticalItemSpacing 4 4
MenuStyle * Foreground black
MenuStyle * Background gray80
MenuStyle * Greyed gray50

MenuStyle * PopupAsRootMenu

# Menus à la GTK
MenuStyle * Hilight3DThin
MenuStyle * HilightBack rgb:e5/e5/e5 , ActiveFore black

# Menus à la Windows
# MenuStyle * Hilight3DOff, TrianglesSolid
# MenuStyle * HilightBack Navy, ActiveFore White

# Décor
# -----
Style * ForeColor gray50
Style * BackColor rgb:ff/bf/bf
Style * HilightFore black
Style * HilightBack rgb:d8/66/ff
TitleStyle ActiveUp Solid rgb:d4/66/ff
TitleStyle Inactive Solid rgb:fc/bf/bf
TitleStyle Centered -- flat
BorderStyle -- HiddenHandles NoInset

# Le bouton 1 garde son apparence normale.
# Bouton 6: triangle vers le bas
# Bouton 4: flèche vers le haut
# Bouton 2: flèche diagonale
# Bouton 4: éclair
ButtonStyle 1 MiniIcon -- flat
ButtonStyle 2 Pixmap mini/bille-bleue.xpm
ButtonStyle 4 Pixmap mini/bille-verte.xpm
ButtonStyle 6 Pixmap mini/bille-orange.xpm
ButtonStyle 3 Pixmap mini/bille-rouge.xpm
ButtonStyle All -- flat UseTitleStyle


# Style
# -----

Style * NoIcon
Style * SloppyFocus
ColormapFocus FollowsFocus
Style * MinOverlapPlacement, NoPPosition
Style * DecorateTransient
# Si on clique dans une fenêtre, elle passe devant. Commenter pour
# désactiver.
Style * MouseFocusClickRaises

Style * FvwmBorder, HandleWidth 4, BorderWidth 4
Style * MwmFunctions, HintOverride


# On ne veut pas maximiser certains programmes
Style XCalc NoButton 2, NoButton 4
Style Xmessage NoButton 2, NoButton 4
# Ni fermer brutalement les xterms.
Style XTerm NoButton 3
Style UXTerm NoButton 3


# Les fenêtres « spéciales »
Style no-decor WindowListSkip, CirculateSkip, CirculateSkipIcon
Style no-decor NoTitle, NoHandles, Sticky, BorderWidth 0
Style no-decor NeverFocus, FixedPosition 

Style "Fvwm*"       UseStyle no-decor
Style "FvwmTaskBar" Handles, HandleWidth 4
Style "FvwmButtons" StaysOnBottom
Style "*lock"       UseStyle no-decor
Style "Perfmeter"   UseStyle no-decor
Style "xload"       UseStyle no-decor
Style "xdaliclock"  UseStyle no-decor
# Style "xmailbox"    UseStyle no-decor
Style "xeyes"       UseStyle no-decor
Style "console"	    UseStyle no-decor, Handles, HandleWidth 2, \
	ClickToFocus, GrabFocusOff, StaysOnBottom
#Style "HttImStatus" NoDecorHint, NoTitle, NoHandles, CirculateSkip
Style "HttImStatus" UseStyle no-decor
Style "Xfce" UseStyle no-decor


# Raccourcis clavier
# ------------------

# La syntaxe des fonctions clavier ou souris est toujours :
# <Touche ou Bouton> <Contexte> <Modificateur> <Action>

# Signification des modificateurs :
# N : aucun
# C : Appui simultané sur la touche Ctrl
# S : Touche Shift
# M : Touche méta (le petit losange noir sur les claviers des Sun)
# A : N'importe quelles touches enfoncées.
# 3 ou 4 suivant les machines : Num-Lock enfoncée. Ça pose plein de
#                               problèmes, donc on va l'ignorer.

# Signification des contextes :
# R : Fond de l'écran
# W : Intérieur d'une fenêtre
# T : Barre de titre
# S : Bord d'une fenêtre
# F : Coin d'une fenêtre
# I : Icone (mais on n'a pas d'icones dans la présente config.)
# A : N'importe ou ailleurs que sur la barre de titre
# 1,2,3... : Boutons de la barre de titre

# Ras le bol des problèmes de num lock :)
IgnoreModifiers L23

# Méta-tab pour aller d'une fenêtre à la suivante.
Key Tab   A M  Next (CurrentPage) Function Deiconify-and-warp

# Ou, au choix,  l'émulation d'un OS bien connu: on ouvre une liste des
# fenêtres sur cet écran et on passe à la fenêtre suivante.
# Malheureusement cela ne fonctionne que sur les machines Linux et
# FreeBSD; sur les Sun, il faut appuyer sur Entrée pour refermer la
# liste. On a donc désactivé ce comportement; si vous y tenez, commentez
# la ligne précédente et décommentez la fin de ce paragraphe.
# 
# Key Tab A M Function Liste
# 
# AddToFunc Liste
# + I Next (CurrentPage CurrentDesk) Function Deiconify-and-warp
# + I WindowList (CurrentPage CurrentDesk) \ 
#  Root c c NoGeometry SelectOnRelease Alt_L


# Pour se déloguer.
Key BackSpace A CM Quit

# Pour changer d'écran.
Key Right A M Scroll 100 0
Key Left  A M Scroll -100 0
Key Up    A M Scroll 0 -100
Key Down  A M Scroll 0 100

# Mettre une fenêtre en avant/arrière plan
Key Prior WTFS124 CM Raise
Key Next  WTFS124 CM Lower
Mouse 1   W M Raise
Mouse 3   W M Lower

# La souris
# ---------

Mouse 1  R   A WindowList NoGeometryWithInfo
Mouse 2  R   A Menu /Debian
Mouse 3  R   A Menu /Debian

# La molette des souris FreeBSD change d'écran virtuel
Mouse 4 R A Nop
Mouse 5 R A Nop
Mouse 4 R S Nop
Mouse 5 R S Nop


Mouse 0  1   A Menu Fenetre
Mouse 0  3   A Delete
Mouse 0  6   A Iconify
Mouse 0  4   A Function BigMax 100 97
Mouse 0  2   A Function BigMax 0 97

Mouse 1  T   A Function Raise-and-move
Mouse 3  T   A Lower
Mouse 2  TFS A Move
Mouse 3  FS  A Move
Mouse 1  FS  A Resize
Mouse 1  FSW M Function Raise-and-move

Key SunFront WFSTI A Raise
Key SunProps WFSTI A Menu Fenetre Button1 0 100
Key SunFind  A     A Menu /Debian Root c c

# Les menus
# ---------

Read /etc/X11/fvwm/menudefs.hook

AddToMenu /Debian
# "Menu" Title
+ "&Fenetre%mini/terminal.xpm%"			Popup Fenetres
   http://www.eleves.ens.fr/tuteurs/aide.html
+ ""

# La suite du menu.
AddToMenu /Debian
+ ""
+ "Rela&ncer l'interface"			Restart
+ "&Quitter%mini/jack.xpm%"			FvwmForm FvwmQuit

AddToMenu Fenetres
+ "Grande &fenetre%mini/terminal.xpm%"		Exec exec xterm -name large
+ "Fenetre &Alpha%mini/alpha.xpm%"		Exec exec xterm -name alpha
+ "Fenetre &Beta%mini/beta.xpm%"		Exec exec xterm -name beta
+ "Fenetre &Gamma%mini/gamma.xpm%"		Exec exec xterm -name gamma
+ ""
+ "Terminal &Unicode%mini/chinois.xpm%"		Exec exec uxterm

AddToMenu Fenetre
+ "Re&stauration"	Function Restore
+ "Dépla&cement%menu-move.xpm%"	Move
+ "Di&mension"		Resize
+ "A&grandissement%menu-maximize.xpm%"	BigMax 100 97
+ ""
+ "De&vant%menu-raise.xpm%"		Raise
+ "De&rrière%menu-lower.xpm%"		Lower
+ "Fi&xer%menu-stick.xpm%"		Stick
+ "M&inimiser%menu-shade%"		Iconify
+ "&Fermer%menu-close.xpm%"		Delete

AddToFunc Delete-not-xterm
+ I WarpToWindow
+ I Current Delete
# + I Current (XTerm) Exec xmessage "On ne détruit pas un xterm..."
# + I Current (!XTerm) Delete

# Les fonctions
# ------------

# Agrandissement avec animation.
AddToFunc BigMax
# Une ruse honteuse. On anime la fenêtre *sur place*.
+ "I" SendToModule FvwmAnimate animate \
$[w.x] $[w.y] $[w.width] $[w.height] \
$[w.x] $[w.y] $[w.width] $[w.height]
+ "I" Maximize $0 $1

AddToFunc Raise-and-move
+ I Raise
+ M Move

AddToFunc Restore
+ I Iconify False
+ I Maximize False
+ I WindowShade False

AddToFunc Deiconify-and-warp
+ I Iconify -1
+ I FlipFocus
+ I Raise
# Cette ligne est censée amener en outre la souris dans la fenêtre
# choisie. On la désactive parce que cela peut se montrer gênant à
# l'usage.
# + I WarpToWindow 2p 2p

DestroyFunc StartFunction
AddToFunc StartFunction
+ I Module FvwmButtons BarreOutils
#+ I Module FvwmTaskBar
+ I Module FvwmAnimate

# Les boutons
# -----------

*BarreOutils: Back gray80
*BarreOutils: Fore black
*BarreOutils: Font -adobe-helvetica-medium-r-normal-*-12-*-*-*-*-*-iso8859-1
*BarreOutils: Frame 1
*BarreOutils: Padding 2 4
*BarreOutils: Geometry +0+0
*BarreOutils: Geometry 525x100
*BarreOutils: ButtonGeometry 30x20
*BarreOutils: Rows 1
*BarreOutils: Columns 2
*BarreOutils: (2x3 Title "Quitter", Icon bomb.xpm, Action 'FvwmForm FvwmQuit')
*BarreOutils: (2x3 Title "Courrier", Padding 2 4,\
   Swallow "xmailbox" 'Exec exec xmailbox')
#*BarreOutils: (Title "Fichiers", Icon folder.xpm, Action 'Exec $XFILEMANAGER')
#*BarreOutils: (Title "Fenêtre", Icon term.xpm, Action \
#   'Exec "XTerm" exec xterm -name large')
#*BarreOutils: (Title "Web", Icon mozilla.xpm, Action 'Exec "Mozilla-bin" \
#   exec $XBROWSER')
#*BarreOutils: (Title "Forum", Icon calvin.xpm, Action 'Exec xterm -name \
#   forum -e forum')
#*BarreOutils: (Title "Aide", Icon aide.xpm, Action 'Exec "Mozilla-bin" \
#   exec $XBROWSER http://www.eleves.ens.fr/tuteurs/aide.html')
*BarreOutils: Rows 5
*BarreOutils: (12x5 Swallow "FvwmPager" 'Module FvwmPager')
*BarreOutils: (4x2 Action 'Exec "xdaliclock" exec xdaliclock', \
   Swallow "xdaliclock" 'Exec exec xdaliclock \
                             -datemode dd/mm/yy -memory low')

*FvwmPager: Back Black
*FvwmPager: Font none
*FvwmPager: Fore gray45
*FvwmPager: Balloons All
*FvwmPager: BalloonYOffset +2
*FvwmPager: BalloonFore Black
*FvwmPager: BalloonBack Yellow
# On peut si on le veut paramétrer plus finement les couleurs.
#*FvwmPager: Hilight aquamarine3
#*FvwmPager: WindowColors gray80 gray80 aquamarine1 aquamarine1

# La barre des tâches
# -------------------
#Style "FvwmTaskBar" StaysOnTop, BackColor gray80, HandleWidth 3
#Style "FvwmTaskBar" BackColor gray80
#*FvwmTaskBar: Font -adobe-helvetica-medium-r-normal-*-12-*-*-*-*-*-iso8859-1
#*FvwmTaskBar: Back gray80
#*FvwmTaskBar: Fore black
# Décommentez cette ligne pour que la barre se réduise automatiquement en
# bas de l'écran.
# *FvwmTaskBar: AutoHide 5
#*FvwmTaskBar: MailBox none
#*FvwmTaskBar: UseSkipList
#*FvwmTaskBar: StartName Menu
#*FvwmTaskBar: FocusFore black
#*FvwmTaskBar: FocusBack rgb:e5/e5/e5
#*FvwmTaskBar: StartMenu Menus Root 0 100-100m-30p
#*FvwmTaskBar: StartIcon mini/menu.xpm
#*FvwmTaskBar: IconFore gray50
#*FvwmTaskBar: IconBack gray80
#*FvwmTaskBar: NoIconAction SendToModule FvwmAnimate animate
#*FvwmTaskBar: Action Click3 Popup Fenetre Mouse 0 -100m

*FvwmAnimate: Width 3
*FvwmAnimate: Iterations 8

# Le dialogue de fermeture de l'interface.
# ---------------------------------------
# XXX rajouter un Restart (et un « Vous pouvez maintenant quitter... »)
*FvwmQuit: GrabServer
*FvwmQuit: WarpPointer
*FvwmQuit: Font -adobe-helvetica-medium-r-normal-*-14-*-*-*-*-*-iso8859-1
*FvwmQuit: ButtonFont -adobe-helvetica-bold-r-normal-*-14-*-*-*-*-*-iso8859-1
*FvwmQuit: Back gray80
*FvwmQuit: Line center
*FvwmQuit: Text "Tu ne vas pas quitter quand même?"
*FvwmQuit: Line center
*FvwmQuit: Text "Dam's, reste avec moi encore un peu!"
*FvwmQuit: Line center
*FvwmQuit: Text " "
*FvwmQuit: Line expand
*FvwmQuit: Button quit "      Va crever, ordure!      " ^M
*FvwmQuit: Command Quit
*FvwmQuit: Button quit "      D'accord, je reste     " ^[
*FvwmQuit: Button quit "  Relancer l'interface  "
*FvwmQuit: Command Restart

Style "FvwmQuit" StaysOnTop, SloppyFocus
Style "FvwmQuit" BorderWidth 4, HilightBack gray80

# Les mini-icônes
# ---------------

# L'icône pour les programmes qui n'en ont pas
Style * MiniIcon mini/item.xpm

Read $HOME/.fvwm/icones.fvwm
