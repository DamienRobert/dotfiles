Propriété affine locale
=======================

Th: Soit P une propriété sur des ouverts affines. On suppose que
(i) Si Spec A a P, les ouverts distingués aussi.
(ii) Si Spec A a un recouvrement fini par des ouverts distingués A_i
(ie A_i=A_f_i avec 1=(f_1, ..., f_n)) alors si les A_i ont P, A aussi.
Alors si X a un recouvrement par des ouverts affines qui ont P, tout ouvert
affine de X a P.

Vient de la
Prop: Soit Spec A et Spec B des ouverts affines d'un schéma X.
Alors l'intersection est l'union d'ouverts affines distingués à la fois
dans A et dans B.

Preuve: il suffit de montrer que tout x dans l'intersection est inclus dans
un ouvert distingué de A et B. Soit A_f un ouvert distingué inclus dans
l'intersection et contenant x, et B_g inclus dans A_f et contenant toujours
x. Alors la section g de Spec B se restreint en une section g' sur Spec
A_f, et il est facile de voir que Spec B_g est isomorphe à Spec (A_f)_g'.
Mais si g'=g''/f^n, Spec(A_f)_g'=Spec(A_fg'') donc est bien distingué dans
A.

Propriétés locales de schémas
=============================

Déf: 
- X est réduit ssi tout ouvert affine est réduit
- X est intègre ssi tout ouvert affine est intègre
- X est loc noeth ssi tout ouvert affine est noethérien
  X est noeth ssi X est loc noeth et qc.

Prop (sections et germes): 
- X réduit <=> toutes les germes sont réduites <=> les sections
de chaque ouvert (pas forcément affine) sont réduites.
- X intègre <=> X est réduit et irréductible <=> les sections de chaque
  ouvert (pas forcément affines) sont intègres => les germes sont intègres.
  Attention: les germes intègres implique seulement X union disjoint de
  schémas intègres.
- X irréductible <=> chaque ouvert affine U est irréductible
  (ie O_X(U) a un unique idéal premier minimal, ou encore le Nilradical de
  O_X(U) est premier) => Les fibres sont irréductibles.
  Attention: les germes irréductibles implique seulement X union disjoint de
  schémas intègres.

Th (propriétés définies localement)
- X est réduit ss'il existe un recouvrement par des affines Spec A_i,
  avec A_i réduit
- X est loc noeth ss'il existe un recouvrement par des affines Spec A_i,
  avec A_i noethérien
- X noeth <=>  il existe un recouvrement ouvert fini avec les A_i noeth.
- X irréductible/intègres ssi X est connexe et il existe un recouvrement
  par des ouverts affines irréductibles/connexes.
Rem: en particulier, si A est réduit/noéth, alors Spec A est réduit/noeth
en tant que schéma. C'est clair que les ouverts distingués de Spec A sont
réduites/noeth, mais c'est moins clair pour les ouverts affines non
distingués!

*Attention*: X noéthérien n'implique pas que l'anneau des sections de chaque
ouvert soit noéthérien, de même pour X de type fini.

Propriétés locales des morphismes
=================================

f: X->Y morphisme de schéma.

Déf:
- f quasicompact ssi la préimage d'un affine est qc (ie est union finie
  d'affines)
- f quasiséparé ssi la préimage d'un affine est quasiséparé
  (X noéthérien => f qcqs)
- f est affine ssi la préimage d'un affine est affine
- f est fini ssi la préimage d'un affine A est un affine B fini sur A
- f est entier ssi la préimage d'un affine A est un affine B entier sur A
- f est localement de type fini ssi pour tout affine B contenu dans la préimage
  d'un affine A, alors B est de type fini sur A
- f est de type fini ssi f est loc de type fini et f est qc, i.e. pour tout
  ouvert affine A, f^-1(Spec A) peut-être recouvert par un nombre fini de
  schémas affines de types finis sur A.
- f est loc de présentation finie ssi pour tout affine B contenu dans la
  préimage d'un affine A, B est une algèbre de présentation finie sur A.
- f est de présentation finie ssi elle est loc de présentation finie et qc
  *et* qs. I.e. pour tout ouvert affine A, f^-1(Spec A) peut-être recouvert
  par un nombre fini de schémas affines de présentations finies sur A et
  d'intersection deux à deux qc.

Prop: 
- toutes ces propriétés se composent (ie f et g qc => gof qc, ...)
- f fini <=> f entier et de type fini.
- Une immersion ouverte dans X est loc de type fini (en fait elle est même
  loc de présentation finie), et si X loc noéthérien alors l'immersion est
  de type fini (car tout sous-espace de X est rétrocompact).
  Si f est loc de type fini et Y loc noeth, X est loc noeth. Si f est de
  type fini et Y noeth, X est noeth.

Th: On dit que la prop P est affine local sur la cible si il existe un
recouvrement ouvert de Y par des Y_i affine tels que f^-1(Y_i)->Y_i a P =>
f a P.
Alors les props suivantes sont affines locales sur la cible
- f qc
- f qs
- f affine
- f fini
- f entier
- f loc de type fini, f de type fini
- f loc de prés fini, f de prés fini
- f est un isomorphisme
- f est une immersion ouverte
- f est une immersion fermée

Rem: Si Y=Spec B est affine, alors f: X->Y est loc de type/prés fini ss'il
existe un recouvrement affine de X par des A_i de types/prés finis sur B.
Et donc dans le cas général, f est loc de type/prés fini ss'il existe un
recouvrement de Y par des affines B_i tels que f^-1(B_i) est recouvert par
des ouverts affines A_j de type/prés finis sur B_i.
*Attention* Il existe des variétés quasi-affines (et donc de type finis)
dont l'anneau des sections globales n'est pas de type finis.

Application: Si Z est un fermé de Spec A localement définit par une
équation, alors son complémentaire est affine.
Pr: sur un ouvert affine Spec B assez petit, Z est défini par f, donc son
complémentaire est B_f est affine. Mais être affine est cible local, donc
le complémentaire de Z est affine.

Rem: pour f iso/immersion ouvert, les propriétés sont locales sur la cible (ie ça marche pour tout recouvrement, même non affine).

Présentation finie
------------------

Th ("Si f est loc de prés finie, une prop vraie sur une germe s'étend en un
ouvert"):
f est loc de présentation fini ssi pour tout système projectifs de
Y-schémas affines S_i, on a
lim ind Hom(S_i,X)=Hom_Y( lim_proj S_i, X).

Rem: on utilise la construction suivante: si f:X -> Spec B est de
présentation finie, alors f est le pull back d'un morphisme de présentation
finie g: X'->Spec Z[x_1, ..., x_N]/I pour N assez grand.
De plus si F est quasicohérent de présentation finie sur X, on peut trouver
g tel que F soit le pullback de F' finiment présenté sur X' (bien sûr comme
X' est noéthérien, il suffit d'avoir g de type fini et F' cohérent).

Cor: si on a un morphisme d'une germe O_Z,z dans X de présentation finie, alors ce morphisme s'étend en un ouvert de Z.

Th: Soit f: X->Y dominant de type fini, génériquement fini entre schémas
intègres. Alors il y a un ouvert dense V \subset Y tel que f^-1(V)->V est
fini.

Pr: découle du Th précédent si f loc de prés finie, sinon voir Hartshorne
exo 3.7.
